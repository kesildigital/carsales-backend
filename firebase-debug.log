[debug] [2024-02-13T18:32:46.131Z] ----------------------------------------------------------------------
[debug] [2024-02-13T18:32:46.133Z] Command:       /opt/homebrew/Cellar/node/21.1.0/bin/node /opt/homebrew/bin/firebase deploy --only functions
[debug] [2024-02-13T18:32:46.133Z] CLI Version:   13.2.1
[debug] [2024-02-13T18:32:46.133Z] Platform:      darwin
[debug] [2024-02-13T18:32:46.133Z] Node Version:  v21.1.0
[debug] [2024-02-13T18:32:46.133Z] Time:          Tue Feb 13 2024 19:32:46 GMT+0100 (Central European Standard Time)
[debug] [2024-02-13T18:32:46.133Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-02-13T18:32:46.164Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-02-13T18:32:46.164Z] > authorizing via signed-in user (kesildigital@gmail.com)
[debug] [2024-02-13T18:32:46.164Z] [iam] checking project carsales-dev-6350a for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-02-13T18:32:46.165Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions [none]
[debug] [2024-02-13T18:32:46.165Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:46.165Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T18:32:46.944Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions 200
[debug] [2024-02-13T18:32:46.944Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T18:32:46.945Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-02-13T18:32:46.945Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-02-13T18:32:47.770Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-02-13T18:32:47.770Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'carsales-dev-6350a'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script. 
[debug] [2024-02-13T18:32:48.659Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T18:32:48.916Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T18:32:48.916Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-02-13T18:32:48.919Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [none]
[debug] [2024-02-13T18:32:48.919Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:48.920Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [none]
[debug] [2024-02-13T18:32:48.920Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:48.922Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [none]
[debug] [2024-02-13T18:32:48.922Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:48.924Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [none]
[debug] [2024-02-13T18:32:48.924Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:49.775Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com 200
[debug] [2024-02-13T18:32:49.775Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-02-13T18:32:49.827Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com 200
[debug] [2024-02-13T18:32:49.827Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-02-13T18:32:49.868Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com 200
[debug] [2024-02-13T18:32:49.869Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-02-13T18:32:49.902Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com 200
[debug] [2024-02-13T18:32:49.903Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-02-13T18:32:49.903Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig [none]
[debug] [2024-02-13T18:32:50.095Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig 200
[debug] [2024-02-13T18:32:50.096Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig {"projectId":"carsales-dev-6350a","storageBucket":"carsales-dev-6350a.appspot.com"}
[debug] [2024-02-13T18:32:50.097Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs [none]
[debug] [2024-02-13T18:32:50.439Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs 200
[debug] [2024-02-13T18:32:50.440Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs {}
[debug] [2024-02-13T18:32:50.443Z] Validating nodejs source
[debug] [2024-02-13T18:32:50.826Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "axios": "^1.6.2",
    "dotenv": "^16.3.1",
    "firebase": "^10.2.0",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^4.7.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-prettier": "^5.0.0",
    "firebase-functions-test": "^3.1.0",
    "prettier": "^3.0.1"
  },
  "private": true
}
[debug] [2024-02-13T18:32:50.826Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-02-13T18:32:50.827Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-02-13T18:32:50.831Z] Found firebase-functions binary at '/Users/lesilvaquint/Documents/GitHub/carsales-backend/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8007

[error] (node:26765) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-02-13T18:32:51.163Z] Got response from /__/functions.yaml {"endpoints":{"onReviewCreated":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/reviews/{reviewId}"},"retry":false},"entryPoint":"onReviewCreated"},"apiRestServer":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"apiRestServer"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/lesilvaquint/Documents/GitHub/carsales-backend/functions (134.4 KB) for uploading 
[debug] [2024-02-13T18:32:56.226Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions [none]
[debug] [2024-02-13T18:32:56.791Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T18:32:56.792Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions {"functions":[{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken","httpsTrigger":{"url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/addFcmToken","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"addFcmToken","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:00.539Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"6e173622-b318-4a04-a195-9b0a4efab0ec","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/6e173622-b318-4a04-a195-9b0a4efab0ec","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}},{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/carsales-dev-6350a/databases/(default)/documents/ff_push_notifications/{id}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"sendPushNotificationsTrigger","timeout":"540s","availableMemoryMb":2048,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:04.291Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"16538d6a-1082-415b-92fe-06eb26ca9309","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/16538d6a-1082-415b-92fe-06eb26ca9309","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-02-13T18:32:56.794Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-02-13T18:32:57.758Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T18:32:57.759Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions {}
[debug] [2024-02-13T18:32:57.761Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) [none]
[debug] [2024-02-13T18:32:58.698Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) 200
[debug] [2024-02-13T18:32:58.699Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) {"name":"projects/carsales-dev-6350a/databases/(default)","uid":"3d25f568-2940-481c-844b-588d01fbdb59","createTime":"2024-02-10T21:43:01.724600Z","updateTime":"2024-02-10T21:43:01.724600Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-02-13T17:32:58.721278Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IP/Qgv35qIQDMPeyuZ3foYQD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-02-13T18:32:58.702Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [none]
[debug] [2024-02-13T18:32:58.702Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:58.704Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [none]
[debug] [2024-02-13T18:32:58.704Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:58.706Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [none]
[debug] [2024-02-13T18:32:58.706Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:58.707Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [none]
[debug] [2024-02-13T18:32:58.707Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:59.111Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com 200
[debug] [2024-02-13T18:32:59.111Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [omitted]
[warn] ⚠  functions: missing required API eventarc.googleapis.com. Enabling now... 
[debug] [2024-02-13T18:32:59.113Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com:enable [none]
[debug] [2024-02-13T18:32:59.113Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com:enable x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:59.573Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com 200
[debug] [2024-02-13T18:32:59.573Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [omitted]
[warn] ⚠  functions: missing required API run.googleapis.com. Enabling now... 
[debug] [2024-02-13T18:32:59.574Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com:enable [none]
[debug] [2024-02-13T18:32:59.574Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com:enable x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:32:59.580Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com 200
[debug] [2024-02-13T18:32:59.580Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[debug] [2024-02-13T18:32:59.615Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com 200
[debug] [2024-02-13T18:32:59.615Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-02-13T18:33:00.041Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com:enable 200
[debug] [2024-02-13T18:33:00.042Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com:enable [omitted]
[debug] [2024-02-13T18:33:01.189Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com:enable 200
[debug] [2024-02-13T18:33:01.190Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com:enable [omitted]
[debug] [2024-02-13T18:33:10.045Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [none]
[debug] [2024-02-13T18:33:10.046Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:33:11.050Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com 200
[debug] [2024-02-13T18:33:11.050Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-02-13T18:33:11.191Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [none]
[debug] [2024-02-13T18:33:11.191Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:33:12.124Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com 200
[debug] [2024-02-13T18:33:12.124Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-02-13T18:33:12.125Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T18:33:12.125Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T18:33:13.122Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T18:33:13.123Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"100318641247188271513"}}
[debug] [2024-02-13T18:33:13.744Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T18:33:13.745Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"111357450704668888623"}}
[debug] [2024-02-13T18:33:13.747Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/943837398663:getIamPolicy [none]
[debug] [2024-02-13T18:33:14.617Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/943837398663:getIamPolicy 200
[debug] [2024-02-13T18:33:14.617Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/943837398663:getIamPolicy {"version":1,"etag":"BwYRR5/rvuk=","bindings":[{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:943837398663@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["group:firebase@flutterflow.io"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-943837398663@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-943837398663@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["group:firebase@flutterflow.io","serviceAccount:943837398663-compute@developer.gserviceaccount.com","serviceAccount:carsales-dev-6350a@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-943837398663@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-943837398663@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountUser","members":["group:firebase@flutterflow.io"]},{"role":"roles/owner","members":["user:kesildigital@gmail.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-943837398663@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2024-02-13T18:33:14.618Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/943837398663:setIamPolicy [none]
[debug] [2024-02-13T18:33:14.618Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/943837398663:setIamPolicy {"policy":{"version":1,"etag":"BwYRR5/rvuk=","bindings":[{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:943837398663@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["group:firebase@flutterflow.io"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-943837398663@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-943837398663@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["group:firebase@flutterflow.io","serviceAccount:943837398663-compute@developer.gserviceaccount.com","serviceAccount:carsales-dev-6350a@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-943837398663@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-943837398663@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com","serviceAccount:service-943837398663@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountUser","members":["group:firebase@flutterflow.io"]},{"role":"roles/owner","members":["user:kesildigital@gmail.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-943837398663@serverless-robot-prod.iam.gserviceaccount.com"]},{"role":"roles/run.invoker","members":["serviceAccount:943837398663-compute@developer.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:943837398663-compute@developer.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2024-02-13T18:33:15.669Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/943837398663:setIamPolicy 200
[debug] [2024-02-13T18:33:15.670Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/943837398663:setIamPolicy {"version":1,"etag":"BwYRR6CjP0k=","bindings":[{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:943837398663@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["group:firebase@flutterflow.io"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-943837398663@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-943837398663@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["group:firebase@flutterflow.io","serviceAccount:943837398663-compute@developer.gserviceaccount.com","serviceAccount:carsales-dev-6350a@appspot.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:943837398663-compute@developer.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-943837398663@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-943837398663@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-943837398663@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-xgtll@carsales-dev-6350a.iam.gserviceaccount.com","serviceAccount:service-943837398663@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountUser","members":["group:firebase@flutterflow.io"]},{"role":"roles/owner","members":["user:kesildigital@gmail.com"]},{"role":"roles/run.invoker","members":["serviceAccount:943837398663-compute@developer.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-943837398663@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2024-02-13T18:33:15.672Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T18:33:15.937Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T18:33:15.938Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[debug] [2024-02-13T18:33:15.940Z] [functions] found 1 new HTTP functions, testing setIamPolicy permission...
[debug] [2024-02-13T18:33:15.941Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions [none]
[debug] [2024-02-13T18:33:15.941Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T18:33:15.941Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2024-02-13T18:33:16.111Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions 200
[debug] [2024-02-13T18:33:16.111Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2024-02-13T18:33:16.111Z] [functions] found setIamPolicy permission, proceeding with deploy
[debug] [2024-02-13T18:33:16.112Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-02-13T18:33:16.953Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-02-13T18:33:16.953Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip?GoogleAccessId=service-943837398663@gcf-admin-robot.iam.gserviceaccount.com&Expires=1707850996&Signature=FK8Bwj%2BKivNEIBXBtXLuzqxczGivq3WtKPvaX98Hg%2FOXQRf92ZYzZyZ7Ya817Wbq7Pq%2FZ1TSsgDCSXovMLR%2FOy%2B0nG1PopDJ482vstT3iArGsTrY%2B%2BxBjco7EB%2FqKYChZiK4JkRs1nXNliVjZYvNfFyC3PghXFdlOf24fF0WMe0fDcZvazsRq%2BN4QZw3EZbpy6EtLMkjQG%2BRgDtqpSUwZnpjLBeaRpPYcaGVEoQPYvJBc7SefstdZZLbeHz3sO20Qr1Kao83Qoz9A%2FdGpMKuttkJbHDu31MuaeTJa6NWRDXgETK4dz7Ot%2FKGVB1HHuIltWwQlKbkflVxhRDa7gWRIw%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip"}}
[debug] [2024-02-13T18:33:16.955Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip GoogleAccessId=service-943837398663%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1707850996&Signature=FK8Bwj%2BKivNEIBXBtXLuzqxczGivq3WtKPvaX98Hg%2FOXQRf92ZYzZyZ7Ya817Wbq7Pq%2FZ1TSsgDCSXovMLR%2FOy%2B0nG1PopDJ482vstT3iArGsTrY%2B%2BxBjco7EB%2FqKYChZiK4JkRs1nXNliVjZYvNfFyC3PghXFdlOf24fF0WMe0fDcZvazsRq%2BN4QZw3EZbpy6EtLMkjQG%2BRgDtqpSUwZnpjLBeaRpPYcaGVEoQPYvJBc7SefstdZZLbeHz3sO20Qr1Kao83Qoz9A%2FdGpMKuttkJbHDu31MuaeTJa6NWRDXgETK4dz7Ot%2FKGVB1HHuIltWwQlKbkflVxhRDa7gWRIw%3D%3D
[debug] [2024-02-13T18:33:16.955Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip [stream]
[debug] [2024-02-13T18:33:17.698Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip 200
[debug] [2024-02-13T18:33:17.698Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] 
The following functions are found in your project but do not exist in your local source code:
	addFcmToken(us-central1)
	sendPushNotificationsTrigger(us-central1)

If you are renaming a function or changing its region, it is recommended that you create the new function first before deleting the old one to prevent event loss. For more info, visit https://firebase.google.com/docs/functions/manage-functions#modify

[info] i  functions: creating Node.js 18 (2nd Gen) function onReviewCreated(us-central1)... 
[info] i  functions: creating Node.js 18 (2nd Gen) function apiRestServer(us-central1)... 
[debug] [2024-02-13T18:34:29.066Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions functionId=onReviewCreated
[debug] [2024-02-13T18:34:29.066Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions {"name":"projects/carsales-dev-6350a/locations/us-central1/functions/onReviewCreated","buildConfig":{"runtime":"nodejs18","entryPoint":"onReviewCreated","source":{"storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/onReviewCreated","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"onReviewCreated"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/reviews/{reviewId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2024-02-13T18:34:52.038Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions 400
[debug] [2024-02-13T18:34:52.039Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions {"error":{"code":400,"message":"Validation failed for trigger projects/carsales-dev-6350a/locations/nam5/triggers/onreviewcreated-874948: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.","status":"FAILED_PRECONDITION"}}
[warn] ⚠  functions: HTTP Error: 400, Validation failed for trigger projects/carsales-dev-6350a/locations/nam5/triggers/onreviewcreated-874948: Invalid resource state for "": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role. 
[warn] ⚠  functions: Since this is your first time using 2nd gen functions, we need a little bit longer to finish setting everything up. Retry the deployment in a few minutes. 
[warn] ⚠  functions:  failed to create function projects/carsales-dev-6350a/locations/us-central1/functions/onReviewCreated 
[error] Failed to create function projects/carsales-dev-6350a/locations/us-central1/functions/onReviewCreated
[debug] [2024-02-13T18:34:52.042Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions functionId=apiRestServer
[debug] [2024-02-13T18:34:52.042Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions {"name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"a75d7f7b-48fd-4565-b5d8-6dd5af2c5bcb.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"}}
[debug] [2024-02-13T18:34:53.170Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions 200
[debug] [2024-02-13T18:34:53.170Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-02-13T18:34:53.171Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:34:53.875Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:34:53.876Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-02-13T18:34:54.378Z] [create-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T18:34:54.379Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:34:55.051Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:34:55.051Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/aa734638-f39e-427a-940f-38b97e0cc7dc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-02-13T18:34:56.052Z] [create-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T18:34:56.053Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:34:56.770Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:34:56.770Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/aa734638-f39e-427a-940f-38b97e0cc7dc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-02-13T18:34:58.772Z] [create-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T18:34:58.773Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:34:58.958Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:34:58.958Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/aa734638-f39e-427a-940f-38b97e0cc7dc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-02-13T18:35:02.959Z] [create-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T18:35:02.960Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:35:03.710Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:35:03.711Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/aa734638-f39e-427a-940f-38b97e0cc7dc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-02-13T18:35:11.713Z] [create-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T18:35:11.714Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:35:12.468Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:35:12.468Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/aa734638-f39e-427a-940f-38b97e0cc7dc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-02-13T18:35:22.469Z] [create-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T18:35:22.470Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:35:23.271Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:35:23.271Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/aa734638-f39e-427a-940f-38b97e0cc7dc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-02-13T18:35:33.272Z] [create-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T18:35:33.273Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea [none]
[debug] [2024-02-13T18:35:34.124Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea 200
[debug] [2024-02-13T18:35:34.125Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707849292779-61147a66d11aa-6591cbfa-ce6555ea","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T18:34:53.172128024Z","endTime":"2024-02-13T18:35:26.936707306Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707849292942223"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8ab93d5d671dea32354575d9f4a8bc953f6726e9"},"environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","message":"Deleting function artifacts in Artifact Registry","state":"COMPLETE"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"COMPLETE","resource":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver"}],"operationType":"CREATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T18_35_11_543Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T18_35_11_543Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663."}}
[debug] [2024-02-13T18:35:34.125Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm ERR! code ERESOLVE
npm ERR! ERESOLVE could not resolve
npm ERR! 
npm ERR! While resolving: firebase-functions-test@3.1.0
npm ERR! Found: firebase-admin@12.0.0
npm ERR! node_modules/firebase-admin
npm ERR!   firebase-admin@"^12.0.0" from the root project
npm ERR!   peer firebase-admin@"^10.0.0 || ^11.0.0 || ^12.0.0" from firebase-functions@4.7.0
npm ERR!   node_modules/firebase-functions
npm ERR!     firebase-functions@"^4.7.0" from the root project
npm ERR!     peer firebase-functions@">=4.3.0" from firebase-functions-test@3.1.0
npm ERR!     node_modules/firebase-functions-test
npm ERR!       dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Could not resolve dependency:
npm ERR! peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR! node_modules/firebase-functions-test
npm ERR!   dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Conflicting peer dependency: firebase-admin@11.11.1
npm ERR! node_modules/firebase-admin
npm ERR!   peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR!   node_modules/firebase-functions-test
npm ERR!     dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Fix the upstream dependency conflict, or retry
npm ERR! this command with --force or --legacy-peer-deps
npm ERR! to accept an incorrect (and potentially broken) dependency resolution.
npm ERR! 
npm ERR! 
npm ERR! For a full report see:
npm ERR! /www-data-home/.npm/_logs/2024-02-13T18_35_11_543Z-eresolve-report.txt

npm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T18_35_11_543Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663.
[debug] [2024-02-13T18:35:34.135Z] Total Function Deployment time: 65065
[debug] [2024-02-13T18:35:34.135Z] 2 Functions Deployed
[debug] [2024-02-13T18:35:34.135Z] 2 Functions Errored
[debug] [2024-02-13T18:35:34.135Z] 0 Function Deployments Aborted
[debug] [2024-02-13T18:35:34.135Z] Average Function Deployment time: 44020.5
[info] 
[info] Functions deploy had errors with the following functions:
	apiRestServer(us-central1)
	onReviewCreated(us-central1)
[debug] [2024-02-13T18:35:34.247Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-02-13T18:35:34.249Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created [none]
[debug] [2024-02-13T18:35:34.250Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server [none]
[debug] [2024-02-13T18:35:34.251Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T18:35:34.676Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T18:35:34.676Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T18:35:34.677Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T18:35:34.680Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T18:35:34.894Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T18:35:34.895Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T18:35:34.895Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T18:35:34.997Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T18:35:35.171Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created 404
[debug] [2024-02-13T18:35:35.171Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-13T18:35:35.183Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server 404
[debug] [2024-02-13T18:35:35.183Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-13T18:35:35.214Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T18:35:35.214Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T18:35:35.214Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/carsales-dev-6350a/us/gcf 
[debug] [2024-02-13T18:35:35.214Z] Functions deploy failed.
[debug] [2024-02-13T18:35:35.214Z] {
  "endpoint": {
    "id": "onReviewCreated",
    "project": "carsales-dev-6350a",
    "region": "us-central1",
    "entryPoint": "onReviewCreated",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "users/{userId}/reviews/{reviewId}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}",
      "GCLOUD_PROJECT": "carsales-dev-6350a",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/carsales-dev-6350a/locations/us-central1/services/onReviewCreated"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "8ab93d5d671dea32354575d9f4a8bc953f6726e9"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/carsales-dev-6350a/locations/us-central1/functions/onReviewCreated"
    },
    "exit": 1,
    "message": "Failed to create function projects/carsales-dev-6350a/locations/us-central1/functions/onReviewCreated",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Validation failed for trigger projects/carsales-dev-6350a/locations/nam5/triggers/onreviewcreated-874948: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "HTTP Error: 400, Validation failed for trigger projects/carsales-dev-6350a/locations/nam5/triggers/onreviewcreated-874948: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2024-02-13T18:35:35.214Z] {
  "endpoint": {
    "id": "apiRestServer",
    "project": "carsales-dev-6350a",
    "region": "us-central1",
    "entryPoint": "apiRestServer",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}",
      "GCLOUD_PROJECT": "carsales-dev-6350a",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "8ab93d5d671dea32354575d9f4a8bc953f6726e9"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T18_35_11_543Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T18_35_11_543Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/aa734638-f39e-427a-940f-38b97e0cc7dc?project=943837398663.",
    "status": 3,
    "code": 3
  }
}
[error] Error: There was an error deploying functions:
[error] - Error Failed to create function onReviewCreated in region us-central1
[error] - Error Failed to create function apiRestServer in region us-central1
[debug] [2024-02-13T20:06:16.840Z] ----------------------------------------------------------------------
[debug] [2024-02-13T20:06:16.841Z] Command:       /opt/homebrew/Cellar/node/21.1.0/bin/node /opt/homebrew/bin/firebase deploy --only functions:apiRestServer
[debug] [2024-02-13T20:06:16.841Z] CLI Version:   13.2.1
[debug] [2024-02-13T20:06:16.841Z] Platform:      darwin
[debug] [2024-02-13T20:06:16.842Z] Node Version:  v21.1.0
[debug] [2024-02-13T20:06:16.842Z] Time:          Tue Feb 13 2024 21:06:16 GMT+0100 (Central European Standard Time)
[debug] [2024-02-13T20:06:16.842Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-02-13T20:06:16.872Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-02-13T20:06:16.872Z] > authorizing via signed-in user (kesildigital@gmail.com)
[debug] [2024-02-13T20:06:16.872Z] [iam] checking project carsales-dev-6350a for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-02-13T20:06:16.873Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions [none]
[debug] [2024-02-13T20:06:16.873Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:16.873Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T20:06:17.728Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions 200
[debug] [2024-02-13T20:06:17.729Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T20:06:17.729Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-02-13T20:06:17.729Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-02-13T20:06:18.496Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-02-13T20:06:18.496Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'carsales-dev-6350a'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script. 
[debug] [2024-02-13T20:06:18.906Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T20:06:19.170Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T20:06:19.171Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-02-13T20:06:19.173Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [none]
[debug] [2024-02-13T20:06:19.173Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:19.174Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [none]
[debug] [2024-02-13T20:06:19.175Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:19.176Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [none]
[debug] [2024-02-13T20:06:19.176Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:19.178Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [none]
[debug] [2024-02-13T20:06:19.179Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:20.018Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com 200
[debug] [2024-02-13T20:06:20.019Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-02-13T20:06:20.040Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com 200
[debug] [2024-02-13T20:06:20.040Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-02-13T20:06:20.118Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com 200
[debug] [2024-02-13T20:06:20.119Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-02-13T20:06:20.121Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com 200
[debug] [2024-02-13T20:06:20.121Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-02-13T20:06:20.122Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig [none]
[debug] [2024-02-13T20:06:20.325Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig 200
[debug] [2024-02-13T20:06:20.326Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig {"projectId":"carsales-dev-6350a","storageBucket":"carsales-dev-6350a.appspot.com"}
[debug] [2024-02-13T20:06:20.327Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs [none]
[debug] [2024-02-13T20:06:20.710Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs 200
[debug] [2024-02-13T20:06:20.710Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs {}
[debug] [2024-02-13T20:06:20.712Z] Validating nodejs source
[debug] [2024-02-13T20:06:21.761Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "axios": "^1.6.2",
    "dotenv": "^16.3.1",
    "firebase": "^10.2.0",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^4.7.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-prettier": "^5.0.0",
    "firebase-functions-test": "^3.1.0",
    "prettier": "^3.0.1"
  },
  "private": true
}
[debug] [2024-02-13T20:06:21.761Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-02-13T20:06:21.763Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-02-13T20:06:21.769Z] Found firebase-functions binary at '/Users/lesilvaquint/Documents/GitHub/carsales-backend/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8255

[error] (node:28563) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-02-13T20:06:21.948Z] Got response from /__/functions.yaml {"endpoints":{"onReviewCreated":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/reviews/{reviewId}"},"retry":false},"entryPoint":"onReviewCreated"},"apiRestServer":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"apiRestServer"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/lesilvaquint/Documents/GitHub/carsales-backend/functions (134.42 KB) for uploading 
[debug] [2024-02-13T20:06:27.026Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions [none]
[debug] [2024-02-13T20:06:27.595Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T20:06:27.596Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions {"functions":[{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken","httpsTrigger":{"url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/addFcmToken","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"addFcmToken","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:00.539Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"6e173622-b318-4a04-a195-9b0a4efab0ec","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/6e173622-b318-4a04-a195-9b0a4efab0ec","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}},{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/carsales-dev-6350a/databases/(default)/documents/ff_push_notifications/{id}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"sendPushNotificationsTrigger","timeout":"540s","availableMemoryMb":2048,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:04.291Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"16538d6a-1082-415b-92fe-06eb26ca9309","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/16538d6a-1082-415b-92fe-06eb26ca9309","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-02-13T20:06:27.600Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-02-13T20:06:28.568Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T20:06:28.569Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions {"functions":[{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"build":"projects/943837398663/locations/us-central1/builds/4f1737eb-b1cf-4a8d-8172-85de5846a412","runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"state":"UNKNOWN","updateTime":"2024-02-13T20:05:44.007131577Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer","createTime":"2024-02-13T19:52:08.026321501Z"}]}
[debug] [2024-02-13T20:06:28.572Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) [none]
[debug] [2024-02-13T20:06:29.449Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) 200
[debug] [2024-02-13T20:06:29.450Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) {"name":"projects/carsales-dev-6350a/databases/(default)","uid":"3d25f568-2940-481c-844b-588d01fbdb59","createTime":"2024-02-10T21:43:01.724600Z","updateTime":"2024-02-10T21:43:01.724600Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-02-13T19:06:29.463192Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"ILORt/COqYQDMPeyuZ3foYQD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-02-13T20:06:29.454Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [none]
[debug] [2024-02-13T20:06:29.455Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:29.458Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [none]
[debug] [2024-02-13T20:06:29.459Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:29.461Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [none]
[debug] [2024-02-13T20:06:29.461Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:29.463Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [none]
[debug] [2024-02-13T20:06:29.463Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:06:30.335Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com 200
[debug] [2024-02-13T20:06:30.335Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-02-13T20:06:30.355Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com 200
[debug] [2024-02-13T20:06:30.356Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-02-13T20:06:30.368Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com 200
[debug] [2024-02-13T20:06:30.368Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-02-13T20:06:30.424Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com 200
[debug] [2024-02-13T20:06:30.424Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-02-13T20:06:30.426Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T20:06:30.426Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T20:06:30.965Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T20:06:30.965Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"111357450704668888623"}}
[debug] [2024-02-13T20:06:31.513Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T20:06:31.514Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"100318641247188271513"}}
[debug] [2024-02-13T20:06:31.518Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T20:06:31.767Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T20:06:31.768Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[debug] [2024-02-13T20:06:31.771Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-02-13T20:06:32.573Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-02-13T20:06:32.574Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/b86f6309-5a14-4df6-b4e5-d50ff816666d.zip?GoogleAccessId=service-943837398663@gcf-admin-robot.iam.gserviceaccount.com&Expires=1707856592&Signature=ddbHZdFOOcDXuQ%2FeqywgnaXOYLkUi2UsjBAM99i%2Bc9OYCZDlf9208eFsWg1zMxEWTqfaxyGojHBLPX2wOi%2BshAFRwSsCS721L%2FjRxbpazqeUuGAaUi4PZCUu1%2F9agRVZ2RbtnV0L7x3q87ggX%2FuWpswttW6VXpKQaWuZSpUiI8QP4qyy%2B6iBbSb4svSUupHLHSFlz6%2B3srtg%2B4UvzMUYkeQJLTf4bn%2B9osu2LvOggGZ9j7sfXSaxNEVfWq7keY0SV3YFMb44XkfcupJrw11zzDOZC1ajcYynSTzmSglC2yRiNwN2HpnhZGuoMCMoDbus6umh7TKSnXKxCZc9EfJF5A%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"b86f6309-5a14-4df6-b4e5-d50ff816666d.zip"}}
[debug] [2024-02-13T20:06:32.577Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/b86f6309-5a14-4df6-b4e5-d50ff816666d.zip GoogleAccessId=service-943837398663%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1707856592&Signature=ddbHZdFOOcDXuQ%2FeqywgnaXOYLkUi2UsjBAM99i%2Bc9OYCZDlf9208eFsWg1zMxEWTqfaxyGojHBLPX2wOi%2BshAFRwSsCS721L%2FjRxbpazqeUuGAaUi4PZCUu1%2F9agRVZ2RbtnV0L7x3q87ggX%2FuWpswttW6VXpKQaWuZSpUiI8QP4qyy%2B6iBbSb4svSUupHLHSFlz6%2B3srtg%2B4UvzMUYkeQJLTf4bn%2B9osu2LvOggGZ9j7sfXSaxNEVfWq7keY0SV3YFMb44XkfcupJrw11zzDOZC1ajcYynSTzmSglC2yRiNwN2HpnhZGuoMCMoDbus6umh7TKSnXKxCZc9EfJF5A%3D%3D
[debug] [2024-02-13T20:06:32.577Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/b86f6309-5a14-4df6-b4e5-d50ff816666d.zip [stream]
[debug] [2024-02-13T20:06:33.243Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/b86f6309-5a14-4df6-b4e5-d50ff816666d.zip 200
[debug] [2024-02-13T20:06:33.243Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/b86f6309-5a14-4df6-b4e5-d50ff816666d.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function apiRestServer(us-central1)... 
[debug] [2024-02-13T20:06:33.253Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CbuildConfig.buildEnvironmentVariables
[debug] [2024-02-13T20:06:33.253Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer {"name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"b86f6309-5a14-4df6-b4e5-d50ff816666d.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"}}
[debug] [2024-02-13T20:06:34.766Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer 200
[debug] [2024-02-13T20:06:34.767Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-02-13T20:06:34.769Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 [none]
[debug] [2024-02-13T20:06:35.465Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 200
[debug] [2024-02-13T20:06:35.465Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854794719975"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Creating build","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:06:35.966Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:06:35.967Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 [none]
[debug] [2024-02-13T20:06:36.679Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 200
[debug] [2024-02-13T20:06:36.680Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854794719975"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:06:37.681Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:06:37.682Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 [none]
[debug] [2024-02-13T20:06:38.377Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 200
[debug] [2024-02-13T20:06:38.377Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854794719975"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:06:40.379Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:06:40.380Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 [none]
[debug] [2024-02-13T20:06:41.077Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 200
[debug] [2024-02-13T20:06:41.078Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854794719975"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:06:45.080Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:06:45.081Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 [none]
[debug] [2024-02-13T20:06:45.879Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 200
[debug] [2024-02-13T20:06:45.879Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854794719975"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:06:53.881Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:06:53.882Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 [none]
[debug] [2024-02-13T20:06:54.686Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 200
[debug] [2024-02-13T20:06:54.687Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854794719975"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:07:04.688Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:07:04.689Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 [none]
[debug] [2024-02-13T20:07:05.542Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 200
[debug] [2024-02-13T20:07:05.542Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854793970-61148ee529235-d109ae6f-80f6d7a7","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:06:34.752755504Z","endTime":"2024-02-13T20:07:03.239255125Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854794719975"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T20_06_50_837Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_06_50_837Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663."}}
[debug] [2024-02-13T20:07:05.543Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm ERR! code ERESOLVE
npm ERR! ERESOLVE could not resolve
npm ERR! 
npm ERR! While resolving: firebase-functions-test@3.1.0
npm ERR! Found: firebase-admin@12.0.0
npm ERR! node_modules/firebase-admin
npm ERR!   firebase-admin@"^12.0.0" from the root project
npm ERR!   peer firebase-admin@"^10.0.0 || ^11.0.0 || ^12.0.0" from firebase-functions@4.7.0
npm ERR!   node_modules/firebase-functions
npm ERR!     firebase-functions@"^4.7.0" from the root project
npm ERR!     peer firebase-functions@">=4.3.0" from firebase-functions-test@3.1.0
npm ERR!     node_modules/firebase-functions-test
npm ERR!       dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Could not resolve dependency:
npm ERR! peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR! node_modules/firebase-functions-test
npm ERR!   dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Conflicting peer dependency: firebase-admin@11.11.1
npm ERR! node_modules/firebase-admin
npm ERR!   peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR!   node_modules/firebase-functions-test
npm ERR!     dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Fix the upstream dependency conflict, or retry
npm ERR! this command with --force or --legacy-peer-deps
npm ERR! to accept an incorrect (and potentially broken) dependency resolution.
npm ERR! 
npm ERR! 
npm ERR! For a full report see:
npm ERR! /www-data-home/.npm/_logs/2024-02-13T20_06_50_837Z-eresolve-report.txt

npm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_06_50_837Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663.
[debug] [2024-02-13T20:07:05.552Z] Total Function Deployment time: 32296
[debug] [2024-02-13T20:07:05.552Z] 1 Functions Deployed
[debug] [2024-02-13T20:07:05.552Z] 1 Functions Errored
[debug] [2024-02-13T20:07:05.552Z] 0 Function Deployments Aborted
[debug] [2024-02-13T20:07:05.552Z] Average Function Deployment time: 32295
[info] 
[info] Functions deploy had errors with the following functions:
	apiRestServer(us-central1)
[debug] [2024-02-13T20:07:05.658Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-02-13T20:07:05.661Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created [none]
[debug] [2024-02-13T20:07:05.663Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server [none]
[debug] [2024-02-13T20:07:05.664Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:07:05.976Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:07:05.977Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:07:05.978Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T20:07:05.980Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:07:06.199Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:07:06.201Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:07:06.202Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T20:07:06.302Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:07:06.520Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created 404
[debug] [2024-02-13T20:07:06.520Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-13T20:07:06.527Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server 404
[debug] [2024-02-13T20:07:06.528Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-13T20:07:06.529Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:07:06.529Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:07:06.529Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/carsales-dev-6350a/us/gcf 
[debug] [2024-02-13T20:07:06.530Z] Functions deploy failed.
[debug] [2024-02-13T20:07:06.530Z] {
  "endpoint": {
    "id": "apiRestServer",
    "project": "carsales-dev-6350a",
    "region": "us-central1",
    "entryPoint": "apiRestServer",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}",
      "GCLOUD_PROJECT": "carsales-dev-6350a",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "cpu": 1,
    "targetedByOnly": true,
    "hash": "f1eca4562127c88def9987e2268f1b19661ab4dc"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T20_06_50_837Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_06_50_837Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/51cd37f0-2a3f-48b6-94ed-30d4ee9df3da?project=943837398663.",
    "status": 3,
    "code": 3
  }
}
[debug] [2024-02-13T20:07:06.574Z] Error: Failed to update function apiRestServer in region us-central1
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:392:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV2Function (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:383:32)
    at async Fabricator.updateEndpoint (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:154:13)
    at async handle (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2024-02-13T20:07:53.913Z] ----------------------------------------------------------------------
[debug] [2024-02-13T20:07:53.915Z] Command:       /opt/homebrew/Cellar/node/21.1.0/bin/node /opt/homebrew/bin/firebase deploy --only functions:apiRestServer
[debug] [2024-02-13T20:07:53.915Z] CLI Version:   13.2.1
[debug] [2024-02-13T20:07:53.915Z] Platform:      darwin
[debug] [2024-02-13T20:07:53.915Z] Node Version:  v21.1.0
[debug] [2024-02-13T20:07:53.915Z] Time:          Tue Feb 13 2024 21:07:53 GMT+0100 (Central European Standard Time)
[debug] [2024-02-13T20:07:53.915Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-02-13T20:07:53.946Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-02-13T20:07:53.946Z] > authorizing via signed-in user (kesildigital@gmail.com)
[debug] [2024-02-13T20:07:53.946Z] [iam] checking project carsales-dev-6350a for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-02-13T20:07:53.947Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions [none]
[debug] [2024-02-13T20:07:53.947Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:07:53.947Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T20:07:54.722Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions 200
[debug] [2024-02-13T20:07:54.722Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T20:07:54.723Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-02-13T20:07:54.723Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-02-13T20:07:55.514Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-02-13T20:07:55.514Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'carsales-dev-6350a'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script. 
[debug] [2024-02-13T20:07:55.925Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T20:07:56.451Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T20:07:56.451Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-02-13T20:07:56.454Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [none]
[debug] [2024-02-13T20:07:56.454Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:07:56.456Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [none]
[debug] [2024-02-13T20:07:56.456Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:07:56.458Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [none]
[debug] [2024-02-13T20:07:56.458Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:07:56.460Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [none]
[debug] [2024-02-13T20:07:56.460Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:07:57.361Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com 200
[debug] [2024-02-13T20:07:57.361Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-02-13T20:07:57.362Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com 200
[debug] [2024-02-13T20:07:57.363Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-02-13T20:07:57.363Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com 200
[debug] [2024-02-13T20:07:57.363Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-02-13T20:07:57.381Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com 200
[debug] [2024-02-13T20:07:57.381Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-02-13T20:07:57.381Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig [none]
[debug] [2024-02-13T20:07:57.582Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig 200
[debug] [2024-02-13T20:07:57.582Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig {"projectId":"carsales-dev-6350a","storageBucket":"carsales-dev-6350a.appspot.com"}
[debug] [2024-02-13T20:07:57.584Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs [none]
[debug] [2024-02-13T20:07:57.843Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs 200
[debug] [2024-02-13T20:07:57.843Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs {}
[debug] [2024-02-13T20:07:57.846Z] Validating nodejs source
[debug] [2024-02-13T20:07:58.168Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "axios": "^1.6.2",
    "dotenv": "^16.3.1",
    "firebase": "^10.2.0",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^4.7.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-prettier": "^5.0.0",
    "firebase-functions-test": "^3.1.0",
    "prettier": "^3.0.1"
  },
  "private": true
}
[debug] [2024-02-13T20:07:58.168Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-02-13T20:07:58.169Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-02-13T20:07:58.173Z] Found firebase-functions binary at '/Users/lesilvaquint/Documents/GitHub/carsales-backend/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8496

[error] (node:28635) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-02-13T20:07:59.376Z] Got response from /__/functions.yaml {"endpoints":{"onReviewCreated":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/reviews/{reviewId}"},"retry":false},"entryPoint":"onReviewCreated"},"apiRestServer":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"apiRestServer"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/lesilvaquint/Documents/GitHub/carsales-backend/functions (134.42 KB) for uploading 
[debug] [2024-02-13T20:08:04.448Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions [none]
[debug] [2024-02-13T20:08:05.028Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T20:08:05.029Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions {"functions":[{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken","httpsTrigger":{"url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/addFcmToken","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"addFcmToken","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:00.539Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"6e173622-b318-4a04-a195-9b0a4efab0ec","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/6e173622-b318-4a04-a195-9b0a4efab0ec","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}},{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/carsales-dev-6350a/databases/(default)/documents/ff_push_notifications/{id}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"sendPushNotificationsTrigger","timeout":"540s","availableMemoryMb":2048,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:04.291Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"16538d6a-1082-415b-92fe-06eb26ca9309","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/16538d6a-1082-415b-92fe-06eb26ca9309","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-02-13T20:08:05.031Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-02-13T20:08:06.059Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T20:08:06.060Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions {"functions":[{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"build":"projects/943837398663/locations/us-central1/builds/4f1737eb-b1cf-4a8d-8172-85de5846a412","runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"state":"UNKNOWN","updateTime":"2024-02-13T20:07:03.247036664Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer","createTime":"2024-02-13T19:52:08.026321501Z"}]}
[debug] [2024-02-13T20:08:06.062Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) [none]
[debug] [2024-02-13T20:08:06.983Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) 200
[debug] [2024-02-13T20:08:06.983Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) {"name":"projects/carsales-dev-6350a/databases/(default)","uid":"3d25f568-2940-481c-844b-588d01fbdb59","createTime":"2024-02-10T21:43:01.724600Z","updateTime":"2024-02-10T21:43:01.724600Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-02-13T19:08:06.911650Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IID28p6PqYQDMPeyuZ3foYQD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-02-13T20:08:06.987Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [none]
[debug] [2024-02-13T20:08:06.988Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:08:06.990Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [none]
[debug] [2024-02-13T20:08:06.990Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:08:06.991Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [none]
[debug] [2024-02-13T20:08:06.992Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:08:06.993Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [none]
[debug] [2024-02-13T20:08:06.993Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:08:07.908Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com 200
[debug] [2024-02-13T20:08:07.908Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-02-13T20:08:07.909Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com 200
[debug] [2024-02-13T20:08:07.909Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-02-13T20:08:07.909Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com 200
[debug] [2024-02-13T20:08:07.909Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-02-13T20:08:07.910Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com 200
[debug] [2024-02-13T20:08:07.910Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-02-13T20:08:07.911Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T20:08:07.912Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T20:08:08.516Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T20:08:08.516Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"111357450704668888623"}}
[debug] [2024-02-13T20:08:09.235Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T20:08:09.235Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"100318641247188271513"}}
[debug] [2024-02-13T20:08:09.238Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T20:08:09.496Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T20:08:09.496Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[debug] [2024-02-13T20:08:09.498Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-02-13T20:08:10.312Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-02-13T20:08:10.312Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/e15ddc0d-e032-44ed-a55e-7bea8c53a19c.zip?GoogleAccessId=service-943837398663@gcf-admin-robot.iam.gserviceaccount.com&Expires=1707856690&Signature=gKwkA1fo28Y%2Ft96q%2F3PMmiibS85eOaR2%2FGXjrhCYf%2BIi7%2FlV6nv0xyCc8%2BwlvBMNl9FnadAOXQcy7cnG2g6a5LZ3aw90f0gBeL0b2Mb8oQ0RojKxjvXYpFQK9TaSVtqZUDqbpdR%2FlSgeNa6C7DlD4VgNBrzw4RGxpoe1IFENcSLP99euNShLePi5guxcyn%2B0%2F4tgvET%2BPmMXsFnVBgrYLkVtiGM7J76wtEGdJxfvguttz%2FzkDJB%2F9Z%2FzW1ST2UyypukYxdXAaftUNoaeXy9sgqSkY8T8hXKuWDfZVGooJoCl33gEt71xGwjMMuTBmOqat6l74fk0ygu9hH9okNtLAQ%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"e15ddc0d-e032-44ed-a55e-7bea8c53a19c.zip"}}
[debug] [2024-02-13T20:08:10.314Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/e15ddc0d-e032-44ed-a55e-7bea8c53a19c.zip GoogleAccessId=service-943837398663%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1707856690&Signature=gKwkA1fo28Y%2Ft96q%2F3PMmiibS85eOaR2%2FGXjrhCYf%2BIi7%2FlV6nv0xyCc8%2BwlvBMNl9FnadAOXQcy7cnG2g6a5LZ3aw90f0gBeL0b2Mb8oQ0RojKxjvXYpFQK9TaSVtqZUDqbpdR%2FlSgeNa6C7DlD4VgNBrzw4RGxpoe1IFENcSLP99euNShLePi5guxcyn%2B0%2F4tgvET%2BPmMXsFnVBgrYLkVtiGM7J76wtEGdJxfvguttz%2FzkDJB%2F9Z%2FzW1ST2UyypukYxdXAaftUNoaeXy9sgqSkY8T8hXKuWDfZVGooJoCl33gEt71xGwjMMuTBmOqat6l74fk0ygu9hH9okNtLAQ%3D%3D
[debug] [2024-02-13T20:08:10.314Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/e15ddc0d-e032-44ed-a55e-7bea8c53a19c.zip [stream]
[debug] [2024-02-13T20:08:11.077Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/e15ddc0d-e032-44ed-a55e-7bea8c53a19c.zip 200
[debug] [2024-02-13T20:08:11.078Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/e15ddc0d-e032-44ed-a55e-7bea8c53a19c.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function apiRestServer(us-central1)... 
[debug] [2024-02-13T20:08:11.083Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CbuildConfig.buildEnvironmentVariables
[debug] [2024-02-13T20:08:11.083Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer {"name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"e15ddc0d-e032-44ed-a55e-7bea8c53a19c.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"}}
[debug] [2024-02-13T20:08:12.583Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer 200
[debug] [2024-02-13T20:08:12.583Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-02-13T20:08:12.584Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:13.297Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:13.297Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Creating build","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/e17f2ccb-87a2-4b30-b9f2-b32d05edd298","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:08:13.800Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:08:13.801Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:14.502Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:14.503Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/e17f2ccb-87a2-4b30-b9f2-b32d05edd298","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:08:15.505Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:08:15.505Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:16.215Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:16.215Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/e17f2ccb-87a2-4b30-b9f2-b32d05edd298","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:08:18.217Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:08:18.218Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:18.963Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:18.964Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/e17f2ccb-87a2-4b30-b9f2-b32d05edd298","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:08:22.966Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:08:22.967Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:23.776Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:23.777Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/e17f2ccb-87a2-4b30-b9f2-b32d05edd298","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:08:31.778Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:08:31.779Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:32.584Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:32.584Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/e17f2ccb-87a2-4b30-b9f2-b32d05edd298","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:08:42.586Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:08:42.587Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:43.436Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:43.436Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/e17f2ccb-87a2-4b30-b9f2-b32d05edd298","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:08:53.437Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:08:53.438Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb [none]
[debug] [2024-02-13T20:08:54.291Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb 200
[debug] [2024-02-13T20:08:54.291Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707854891787-61148f42726ab-44e1deb5-fe7c6ddb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:08:12.582656311Z","endTime":"2024-02-13T20:08:44.291022232Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707854892544018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T20_08_29_324Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_08_29_324Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663."}}
[debug] [2024-02-13T20:08:54.292Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm ERR! code ERESOLVE
npm ERR! ERESOLVE could not resolve
npm ERR! 
npm ERR! While resolving: firebase-functions-test@3.1.0
npm ERR! Found: firebase-admin@12.0.0
npm ERR! node_modules/firebase-admin
npm ERR!   firebase-admin@"^12.0.0" from the root project
npm ERR!   peer firebase-admin@"^10.0.0 || ^11.0.0 || ^12.0.0" from firebase-functions@4.7.0
npm ERR!   node_modules/firebase-functions
npm ERR!     firebase-functions@"^4.7.0" from the root project
npm ERR!     peer firebase-functions@">=4.3.0" from firebase-functions-test@3.1.0
npm ERR!     node_modules/firebase-functions-test
npm ERR!       dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Could not resolve dependency:
npm ERR! peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR! node_modules/firebase-functions-test
npm ERR!   dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Conflicting peer dependency: firebase-admin@11.11.1
npm ERR! node_modules/firebase-admin
npm ERR!   peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR!   node_modules/firebase-functions-test
npm ERR!     dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Fix the upstream dependency conflict, or retry
npm ERR! this command with --force or --legacy-peer-deps
npm ERR! to accept an incorrect (and potentially broken) dependency resolution.
npm ERR! 
npm ERR! 
npm ERR! For a full report see:
npm ERR! /www-data-home/.npm/_logs/2024-02-13T20_08_29_324Z-eresolve-report.txt

npm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_08_29_324Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663.
[debug] [2024-02-13T20:08:54.299Z] Total Function Deployment time: 43213
[debug] [2024-02-13T20:08:54.299Z] 1 Functions Deployed
[debug] [2024-02-13T20:08:54.299Z] 1 Functions Errored
[debug] [2024-02-13T20:08:54.299Z] 0 Function Deployments Aborted
[debug] [2024-02-13T20:08:54.299Z] Average Function Deployment time: 43212
[info] 
[info] Functions deploy had errors with the following functions:
	apiRestServer(us-central1)
[debug] [2024-02-13T20:08:54.436Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-02-13T20:08:54.437Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created [none]
[debug] [2024-02-13T20:08:54.440Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server [none]
[debug] [2024-02-13T20:08:54.441Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:08:54.745Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:08:54.745Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:08:54.746Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T20:08:54.748Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:08:54.977Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:08:54.977Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:08:54.978Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T20:08:55.080Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:08:55.306Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:08:55.306Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:08:55.306Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T20:08:55.308Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created 404
[debug] [2024-02-13T20:08:55.308Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-13T20:08:55.329Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server 404
[debug] [2024-02-13T20:08:55.329Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server\" was not found.","status":"NOT_FOUND"}}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/carsales-dev-6350a/us/gcf 
[debug] [2024-02-13T20:08:55.330Z] Functions deploy failed.
[debug] [2024-02-13T20:08:55.330Z] {
  "endpoint": {
    "id": "apiRestServer",
    "project": "carsales-dev-6350a",
    "region": "us-central1",
    "entryPoint": "apiRestServer",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}",
      "GCLOUD_PROJECT": "carsales-dev-6350a",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "cpu": 1,
    "targetedByOnly": true,
    "hash": "f1eca4562127c88def9987e2268f1b19661ab4dc"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T20_08_29_324Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_08_29_324Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/e17f2ccb-87a2-4b30-b9f2-b32d05edd298?project=943837398663.",
    "status": 3,
    "code": 3
  }
}
[debug] [2024-02-13T20:08:55.368Z] Error: Failed to update function apiRestServer in region us-central1
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:392:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV2Function (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:383:32)
    at async Fabricator.updateEndpoint (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:154:13)
    at async handle (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2024-02-13T20:25:27.331Z] ----------------------------------------------------------------------
[debug] [2024-02-13T20:25:27.332Z] Command:       /opt/homebrew/Cellar/node/21.1.0/bin/node /opt/homebrew/bin/firebase deploy --only functions:apiRestServer
[debug] [2024-02-13T20:25:27.332Z] CLI Version:   13.2.1
[debug] [2024-02-13T20:25:27.332Z] Platform:      darwin
[debug] [2024-02-13T20:25:27.333Z] Node Version:  v21.1.0
[debug] [2024-02-13T20:25:27.333Z] Time:          Tue Feb 13 2024 21:25:27 GMT+0100 (Central European Standard Time)
[debug] [2024-02-13T20:25:27.333Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-02-13T20:25:27.364Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-02-13T20:25:27.364Z] > authorizing via signed-in user (kesildigital@gmail.com)
[debug] [2024-02-13T20:25:27.364Z] [iam] checking project carsales-dev-6350a for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-02-13T20:25:27.365Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions [none]
[debug] [2024-02-13T20:25:27.365Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:27.365Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T20:25:28.195Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions 200
[debug] [2024-02-13T20:25:28.195Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/carsales-dev-6350a:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-13T20:25:28.195Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-02-13T20:25:28.195Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-02-13T20:25:29.040Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-02-13T20:25:29.040Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/carsales-dev-6350a/serviceAccounts/carsales-dev-6350a@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'carsales-dev-6350a'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script. 
[debug] [2024-02-13T20:25:29.582Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T20:25:29.907Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T20:25:29.907Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-02-13T20:25:29.910Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [none]
[debug] [2024-02-13T20:25:29.910Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:29.912Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [none]
[debug] [2024-02-13T20:25:29.912Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:29.913Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [none]
[debug] [2024-02-13T20:25:29.913Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:29.914Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [none]
[debug] [2024-02-13T20:25:29.914Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:30.788Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com 200
[debug] [2024-02-13T20:25:30.789Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-02-13T20:25:30.863Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com 200
[debug] [2024-02-13T20:25:30.864Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-02-13T20:25:30.865Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com 200
[debug] [2024-02-13T20:25:30.866Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-02-13T20:25:30.986Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com 200
[debug] [2024-02-13T20:25:30.986Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-02-13T20:25:30.987Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig [none]
[debug] [2024-02-13T20:25:31.191Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig 200
[debug] [2024-02-13T20:25:31.191Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a/adminSdkConfig {"projectId":"carsales-dev-6350a","storageBucket":"carsales-dev-6350a.appspot.com"}
[debug] [2024-02-13T20:25:31.192Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs [none]
[debug] [2024-02-13T20:25:31.505Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs 200
[debug] [2024-02-13T20:25:31.505Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/carsales-dev-6350a/configs {}
[debug] [2024-02-13T20:25:31.508Z] Validating nodejs source
[debug] [2024-02-13T20:25:31.871Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "axios": "^1.6.2",
    "dotenv": "^16.3.1",
    "firebase": "^10.2.0",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^4.7.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-prettier": "^5.0.0",
    "firebase-functions-test": "^3.1.0",
    "prettier": "^3.0.1"
  },
  "private": true
}
[debug] [2024-02-13T20:25:31.871Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-02-13T20:25:31.872Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-02-13T20:25:31.876Z] Found firebase-functions binary at '/Users/lesilvaquint/Documents/GitHub/carsales-backend/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8322

[error] (node:29182) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-02-13T20:25:32.161Z] Got response from /__/functions.yaml {"endpoints":{"onReviewCreated":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/reviews/{reviewId}"},"retry":false},"entryPoint":"onReviewCreated"},"apiRestServer":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"apiRestServer"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/lesilvaquint/Documents/GitHub/carsales-backend/functions (134.42 KB) for uploading 
[debug] [2024-02-13T20:25:37.223Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions [none]
[debug] [2024-02-13T20:25:37.847Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T20:25:37.847Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/carsales-dev-6350a/locations/-/functions {"functions":[{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken","httpsTrigger":{"url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/addFcmToken","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"addFcmToken","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:00.539Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/addFcmToken"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"6e173622-b318-4a04-a195-9b0a4efab0ec","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/6e173622-b318-4a04-a195-9b0a4efab0ec","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}},{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/carsales-dev-6350a/databases/(default)/documents/ff_push_notifications/{id}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"sendPushNotificationsTrigger","timeout":"540s","availableMemoryMb":2048,"serviceAccountEmail":"carsales-dev-6350a@appspot.gserviceaccount.com","updateTime":"2024-02-10T21:47:04.291Z","versionId":"2","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"bb58359a03f40708e3f241e34b954bab82445541"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-439680384818.us-central1.cloudfunctions.appspot.com/fce10fb5-aa89-481e-b2ba-fdebac99972b.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/functions/sendPushNotificationsTrigger"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"16538d6a-1082-415b-92fe-06eb26ca9309","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/943837398663/locations/us-central1/builds/16538d6a-1082-415b-92fe-06eb26ca9309","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-02-13T20:25:37.850Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-02-13T20:25:38.822Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions 200
[debug] [2024-02-13T20:25:38.823Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/-/functions {"functions":[{"name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"build":"projects/943837398663/locations/us-central1/builds/4f1737eb-b1cf-4a8d-8172-85de5846a412","runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"state":"UNKNOWN","updateTime":"2024-02-13T20:08:44.296810472Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer","createTime":"2024-02-13T19:52:08.026321501Z"}]}
[debug] [2024-02-13T20:25:38.826Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) [none]
[debug] [2024-02-13T20:25:39.738Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) 200
[debug] [2024-02-13T20:25:39.739Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/carsales-dev-6350a/databases/(default) {"name":"projects/carsales-dev-6350a/databases/(default)","uid":"3d25f568-2940-481c-844b-588d01fbdb59","createTime":"2024-02-10T21:43:01.724600Z","updateTime":"2024-02-10T21:43:01.724600Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-02-13T19:25:39.739866Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IOS69pSTqYQDMPeyuZ3foYQD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-02-13T20:25:39.740Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [none]
[debug] [2024-02-13T20:25:39.740Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:39.741Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [none]
[debug] [2024-02-13T20:25:39.741Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:39.741Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [none]
[debug] [2024-02-13T20:25:39.741Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:39.742Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [none]
[debug] [2024-02-13T20:25:39.742Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com x-goog-quota-user=projects/carsales-dev-6350a
[debug] [2024-02-13T20:25:40.610Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com 200
[debug] [2024-02-13T20:25:40.611Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-02-13T20:25:40.645Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com 200
[debug] [2024-02-13T20:25:40.645Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-02-13T20:25:40.661Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com 200
[debug] [2024-02-13T20:25:40.661Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[debug] [2024-02-13T20:25:40.691Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com 200
[debug] [2024-02-13T20:25:40.692Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/carsales-dev-6350a/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-02-13T20:25:40.692Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T20:25:40.693Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-13T20:25:41.718Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T20:25:41.718Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"111357450704668888623"}}
[debug] [2024-02-13T20:25:41.904Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-13T20:25:41.904Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/943837398663/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-943837398663@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"100318641247188271513"}}
[debug] [2024-02-13T20:25:41.907Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a [none]
[debug] [2024-02-13T20:25:42.154Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a 200
[debug] [2024-02-13T20:25:42.154Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/carsales-dev-6350a {"projectId":"carsales-dev-6350a","projectNumber":"943837398663","displayName":"carsales-dev","name":"projects/carsales-dev-6350a","resources":{"hostingSite":"carsales-dev-6350a"},"state":"ACTIVE","etag":"1_d76643d7-538f-4bad-9eac-8e6909ecd1b2"}
[debug] [2024-02-13T20:25:42.156Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-02-13T20:25:42.922Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-02-13T20:25:42.923Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/96828588-8313-41de-b1ec-f36ae892223d.zip?GoogleAccessId=service-943837398663@gcf-admin-robot.iam.gserviceaccount.com&Expires=1707857742&Signature=VALvxbwxKXq8VmjpXUMn5XpTsjiaIU9CHgMTN7YoZVYuMMSSC4O1KVoG%2B3NQ%2BlgPLilsG5g1QqI7WRo3mWrnCE34Hu23kVaetTVI2PqTGBJLsPqt7U4lCxxcFPkH0gmLfeEHKcxDxShzR7xQKet8sCSzDAVBPeO0VrBWZ4Ny3QhhCVaAUF152Pod%2Fy9CED6ccodG9bOosPtuSBkgmFnhTpGFqTETq950mzx9Hx05ABkaJcFBBhaB%2Bzjc3u0Od1tGN9O6KtIzHX7QyGDvC1hwk4%2B6A%2BG5NBXsJGRDduCTn1irVCxT4IHl7hGHzzkVSXJp7cnYr%2FCT0gwuSyVSEUH1bA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"96828588-8313-41de-b1ec-f36ae892223d.zip"}}
[debug] [2024-02-13T20:25:42.925Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/96828588-8313-41de-b1ec-f36ae892223d.zip GoogleAccessId=service-943837398663%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1707857742&Signature=VALvxbwxKXq8VmjpXUMn5XpTsjiaIU9CHgMTN7YoZVYuMMSSC4O1KVoG%2B3NQ%2BlgPLilsG5g1QqI7WRo3mWrnCE34Hu23kVaetTVI2PqTGBJLsPqt7U4lCxxcFPkH0gmLfeEHKcxDxShzR7xQKet8sCSzDAVBPeO0VrBWZ4Ny3QhhCVaAUF152Pod%2Fy9CED6ccodG9bOosPtuSBkgmFnhTpGFqTETq950mzx9Hx05ABkaJcFBBhaB%2Bzjc3u0Od1tGN9O6KtIzHX7QyGDvC1hwk4%2B6A%2BG5NBXsJGRDduCTn1irVCxT4IHl7hGHzzkVSXJp7cnYr%2FCT0gwuSyVSEUH1bA%3D%3D
[debug] [2024-02-13T20:25:42.926Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/96828588-8313-41de-b1ec-f36ae892223d.zip [stream]
[debug] [2024-02-13T20:25:43.785Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/96828588-8313-41de-b1ec-f36ae892223d.zip 200
[debug] [2024-02-13T20:25:43.786Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-943837398663-us-central1/96828588-8313-41de-b1ec-f36ae892223d.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function apiRestServer(us-central1)... 
[debug] [2024-02-13T20:25:43.792Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CbuildConfig.buildEnvironmentVariables
[debug] [2024-02-13T20:25:43.793Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer {"name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-uploads-943837398663-us-central1","object":"96828588-8313-41de-b1ec-f36ae892223d.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"}}
[debug] [2024-02-13T20:25:45.279Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer 200
[debug] [2024-02-13T20:25:45.279Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-02-13T20:25:45.281Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 [none]
[debug] [2024-02-13T20:25:45.975Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 200
[debug] [2024-02-13T20:25:45.976Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707855945225259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:25:46.479Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:25:46.480Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 [none]
[debug] [2024-02-13T20:25:47.190Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 200
[debug] [2024-02-13T20:25:47.190Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707855945225259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/416488c4-2269-4603-8bb0-661391ad2adc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:25:48.192Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:25:48.193Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 [none]
[debug] [2024-02-13T20:25:48.886Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 200
[debug] [2024-02-13T20:25:48.886Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707855945225259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/416488c4-2269-4603-8bb0-661391ad2adc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:25:50.888Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:25:50.888Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 [none]
[debug] [2024-02-13T20:25:51.671Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 200
[debug] [2024-02-13T20:25:51.672Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707855945225259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/416488c4-2269-4603-8bb0-661391ad2adc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:25:55.675Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:25:55.676Z] > refreshing access token with scopes: []
[debug] [2024-02-13T20:25:55.678Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-02-13T20:25:55.678Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-02-13T20:25:55.832Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-02-13T20:25:55.833Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-02-13T20:25:55.847Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 [none]
[debug] [2024-02-13T20:25:56.585Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 200
[debug] [2024-02-13T20:25:56.586Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707855945225259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/416488c4-2269-4603-8bb0-661391ad2adc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:26:04.587Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:26:04.588Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 [none]
[debug] [2024-02-13T20:26:05.349Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 200
[debug] [2024-02-13T20:26:05.349Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707855945225259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/943837398663/locations/us-central1/builds/416488c4-2269-4603-8bb0-661391ad2adc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-02-13T20:26:15.351Z] [update-default-us-central1-apiRestServer] Retrying task index 0
[debug] [2024-02-13T20:26:15.352Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 [none]
[debug] [2024-02-13T20:26:16.122Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 200
[debug] [2024-02-13T20:26:16.122Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8 {"name":"projects/carsales-dev-6350a/locations/us-central1/operations/operation-1707855944495-6114932e62fe1-796a842d-a25ae7e8","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-02-13T20:25:45.258398778Z","endTime":"2024-02-13T20:26:09.720761593Z","target":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/carsales-dev-6350a/locations/us-central1/functions/apiRestServer","buildConfig":{"runtime":"nodejs18","entryPoint":"apiRestServer","source":{"storageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707855945225259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-943837398663-us-central1","object":"apiRestServer/function-source.zip","generation":"1707853927814706"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/carsales-dev-6350a/locations/us-central1/services/apirestserver","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}","GCLOUD_PROJECT":"carsales-dev-6350a","EVENTARC_CLOUD_EVENT_SOURCE":"projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer","FUNCTION_TARGET":"apiRestServer"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"943837398663-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"f1eca4562127c88def9987e2268f1b19661ab4dc"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/carsales-dev-6350a/locations/us-central1/services/apirestserver for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-carsales-dev-6350a.cloudfunctions.net/apiRestServer"},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T20_26_01_050Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_26_01_050Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663."}}
[debug] [2024-02-13T20:26:16.123Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm ERR! code ERESOLVE
npm ERR! ERESOLVE could not resolve
npm ERR! 
npm ERR! While resolving: firebase-functions-test@3.1.0
npm ERR! Found: firebase-admin@12.0.0
npm ERR! node_modules/firebase-admin
npm ERR!   firebase-admin@"^12.0.0" from the root project
npm ERR!   peer firebase-admin@"^10.0.0 || ^11.0.0 || ^12.0.0" from firebase-functions@4.7.0
npm ERR!   node_modules/firebase-functions
npm ERR!     firebase-functions@"^4.7.0" from the root project
npm ERR!     peer firebase-functions@">=4.3.0" from firebase-functions-test@3.1.0
npm ERR!     node_modules/firebase-functions-test
npm ERR!       dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Could not resolve dependency:
npm ERR! peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR! node_modules/firebase-functions-test
npm ERR!   dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Conflicting peer dependency: firebase-admin@11.11.1
npm ERR! node_modules/firebase-admin
npm ERR!   peer firebase-admin@"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0" from firebase-functions-test@3.1.0
npm ERR!   node_modules/firebase-functions-test
npm ERR!     dev firebase-functions-test@"^3.1.0" from the root project
npm ERR! 
npm ERR! Fix the upstream dependency conflict, or retry
npm ERR! this command with --force or --legacy-peer-deps
npm ERR! to accept an incorrect (and potentially broken) dependency resolution.
npm ERR! 
npm ERR! 
npm ERR! For a full report see:
npm ERR! /www-data-home/.npm/_logs/2024-02-13T20_26_01_050Z-eresolve-report.txt

npm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_26_01_050Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663.
[debug] [2024-02-13T20:26:16.130Z] Total Function Deployment time: 32336
[debug] [2024-02-13T20:26:16.130Z] 1 Functions Deployed
[debug] [2024-02-13T20:26:16.130Z] 1 Functions Errored
[debug] [2024-02-13T20:26:16.130Z] 0 Function Deployments Aborted
[debug] [2024-02-13T20:26:16.130Z] Average Function Deployment time: 32335
[info] 
[info] Functions deploy had errors with the following functions:
	apiRestServer(us-central1)
[debug] [2024-02-13T20:26:16.254Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-02-13T20:26:16.256Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created [none]
[debug] [2024-02-13T20:26:16.257Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server [none]
[debug] [2024-02-13T20:26:16.260Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:26:16.692Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:26:16.692Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:26:16.693Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T20:26:16.696Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:26:16.915Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:26:16.916Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:26:16.916Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-13T20:26:17.017Z] >>> [apiv2][query] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list [none]
[debug] [2024-02-13T20:26:17.144Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created 404
[debug] [2024-02-13T20:26:17.144Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/on_review_created\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-13T20:26:17.163Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server 404
[debug] [2024-02-13T20:26:17.164Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server {"error":{"code":404,"message":"Package \"projects/carsales-dev-6350a/locations/us-central1/repositories/gcf-artifacts/packages/api_rest_server\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-13T20:26:17.218Z] <<< [apiv2][status] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list 404
[debug] [2024-02-13T20:26:17.218Z] <<< [apiv2][body] GET https://us.gcr.io/v2/carsales-dev-6350a/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-13T20:26:17.218Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/carsales-dev-6350a/us/gcf 
[debug] [2024-02-13T20:26:17.218Z] Functions deploy failed.
[debug] [2024-02-13T20:26:17.218Z] {
  "endpoint": {
    "id": "apiRestServer",
    "project": "carsales-dev-6350a",
    "region": "us-central1",
    "entryPoint": "apiRestServer",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"carsales-dev-6350a\",\"storageBucket\":\"carsales-dev-6350a.appspot.com\"}",
      "GCLOUD_PROJECT": "carsales-dev-6350a",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/carsales-dev-6350a/locations/us-central1/services/apiRestServer"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "cpu": 1,
    "targetedByOnly": true,
    "hash": "f1eca4562127c88def9987e2268f1b19661ab4dc"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! \nnpm ERR! While resolving: firebase-functions-test@3.1.0\nnpm ERR! Found: firebase-admin@12.0.0\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   firebase-admin@\"^12.0.0\" from the root project\nnpm ERR!   peer firebase-admin@\"^10.0.0 || ^11.0.0 || ^12.0.0\" from firebase-functions@4.7.0\nnpm ERR!   node_modules/firebase-functions\nnpm ERR!     firebase-functions@\"^4.7.0\" from the root project\nnpm ERR!     peer firebase-functions@\">=4.3.0\" from firebase-functions-test@3.1.0\nnpm ERR!     node_modules/firebase-functions-test\nnpm ERR!       dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Could not resolve dependency:\nnpm ERR! peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR! node_modules/firebase-functions-test\nnpm ERR!   dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Conflicting peer dependency: firebase-admin@11.11.1\nnpm ERR! node_modules/firebase-admin\nnpm ERR!   peer firebase-admin@\"^8.0.0 || ^9.0.0 || ^10.0.0 || ^11.0.0\" from firebase-functions-test@3.1.0\nnpm ERR!   node_modules/firebase-functions-test\nnpm ERR!     dev firebase-functions-test@\"^3.1.0\" from the root project\nnpm ERR! \nnpm ERR! Fix the upstream dependency conflict, or retry\nnpm ERR! this command with --force or --legacy-peer-deps\nnpm ERR! to accept an incorrect (and potentially broken) dependency resolution.\nnpm ERR! \nnpm ERR! \nnpm ERR! For a full report see:\nnpm ERR! /www-data-home/.npm/_logs/2024-02-13T20_26_01_050Z-eresolve-report.txt\n\nnpm ERR! A complete log of this run can be found in: /www-data-home/.npm/_logs/2024-02-13T20_26_01_050Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/416488c4-2269-4603-8bb0-661391ad2adc?project=943837398663.",
    "status": 3,
    "code": 3
  }
}
[debug] [2024-02-13T20:26:17.257Z] Error: Failed to update function apiRestServer in region us-central1
    at /opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:392:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV2Function (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:383:32)
    at async Fabricator.updateEndpoint (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:154:13)
    at async handle (/opt/homebrew/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
